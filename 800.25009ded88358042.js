"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[800],{7800(F,u,i){i.d(u,{InitializerPage:()=>R});var a=i(467),c=i(375),d=i(9769),C=i(7558),g=i(2040),_=i(1600),O=i(5689),x=i(5902),h=i(5079),l=i(5873),f=i(8018),P=i(6860),v=i(5670),t=i(5547);function b(o,r){1&o&&(t.j41(0,"span"),t.EFF(1,"\u2713"),t.k0s())}function E(o,r){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const p=t.XpG().$index;t.R7$(),t.JRh(p+1)}}function I(o,r){1&o&&(t.j41(0,"div",20)(1,"div",21),t.nrm(2,"span")(3,"span")(4,"span"),t.k0s()())}function y(o,r){if(1&o&&(t.j41(0,"div",17)(1,"div",18),t.nVh(2,b,2,0,"span"),t.nVh(3,E,2,1,"span"),t.k0s(),t.j41(4,"div",19),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.nVh(7,I,5,0,"div",20),t.k0s()),2&o){const p=r.$implicit,n=r.$index,e=t.XpG();t.HbH(e.getStepClass(n)),t.R7$(2),t.vxM(e.currentStep>n+1?2:-1),t.R7$(),t.vxM(e.currentStep<=n+1?3:-1),t.R7$(2),t.JRh(t.bMT(6,6,p)),t.R7$(2),t.vxM(e.currentStep===n+1?7:-1)}}let R=(()=>{var o;class r{constructor(){this.navCtrl=(0,c.WQX)(_.d),this.apiService=(0,c.WQX)(O.z),this.storage=(0,c.WQX)(_.H),this.alertService=(0,c.WQX)(x.n),this.progressPercent=0,this.currentStep=0,this.steps=["Loading company information","Loading farmer profile","Preparing navigation"],(0,h.a)({leaf:l.V48,qrCode:l.JBo,gift:l.P2T})}ngOnInit(){this.initializeApp()}initializeApp(){var n=this;return(0,a.A)(function*(){try{yield n.animateProgress(0,10,800),n.currentStep=1,yield n.loadCompanyInfo(),yield n.animateProgress(10,25,600),n.currentStep=2,yield n.loadFarmerProfile(),yield n.animateProgress(25,50,800),n.currentStep=3,yield n.finalizeInitialization(),yield n.animateProgress(50,100,1e3)}catch{n.alertService.alert("Initialization Failed")}})()}animateProgress(n,e,s){return new Promise(D=>{const T=Date.now(),m=()=>{const w=Date.now()-T,M=Math.min(w/s,1),A=1-Math.pow(1-M,3);this.progressPercent=n+(e-n)*A,M<1?requestAnimationFrame(m):(this.progressPercent=e,D())};m()})}checkPermission(){return(0,a.A)(function*(){"granted"!==(yield P.vi.checkPermissions()).camera&&(yield P.vi.requestPermissions())})()}loadCompanyInfo(){var n=this;return(0,a.A)(function*(){yield n.checkPermission(),n.apiService.get("dummy/result",null,{"content-type":"application/json"}).pipe((0,v.t)({bufferSize:1,refCount:!0})).subscribe({next:e=>{n.storage.companyInfo.set(e)},error:e=>{n.alertService.alert(e.message)}})})()}loadFarmerProfile(){return(0,a.A)(function*(){yield new Promise(n=>setTimeout(n,800))})()}finalizeInitialization(){var n=this;return(0,a.A)(function*(){yield new Promise(s=>setTimeout(s,500)),(yield n.storage.get("farmerInfo"))?.id?n.navCtrl.navRoot("dashboard",null,"forward"):n.navCtrl.navRoot("login",null,"forward")})()}getStepClass(n){return this.currentStep>n+1?"completed":this.currentStep===n+1?"active":""}static#t=o=()=>(this.\u0275fac=function(e){return new(e||r)},this.\u0275cmp=t.VBU({type:r,selectors:[["app-initializer"]],decls:29,vars:21,consts:[[1,"initialization-container","ion-padding"],[1,"app-logo"],[1,"logo-circle"],[1,"p-2"],["src","../../assets/img/GFL Logo.png","alt","Logo",1,"w-24","h-auto"],[1,"logo-text"],[1,"logo-subtitle"],[1,"progress-container"],[1,"progress-text"],[1,"progress-bar","w-full"],[1,"progress-fill"],[1,"loading-steps","w-full"],[1,"step",3,"class"],[1,"rewards-preview"],[1,"rewards-title"],["name","gift"],[1,"rewards-description"],[1,"step"],[1,"step-icon"],[1,"step-text"],[1,"step-loader"],[1,"loading-dots"]],template:function(e,s){1&e&&(t.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"img",4),t.k0s()(),t.j41(5,"div",5),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"div",6),t.EFF(9),t.nI1(10,"translate"),t.k0s()(),t.j41(11,"div",7)(12,"div",8),t.EFF(13),t.nI1(14,"number"),t.nI1(15,"translate"),t.k0s(),t.j41(16,"div",9),t.nrm(17,"div",10),t.k0s()(),t.j41(18,"div",11),t.Z7z(19,y,8,8,"div",12,t.fX1),t.k0s(),t.j41(21,"div",13)(22,"div",14),t.nrm(23,"ion-icon",15),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.j41(26,"div",16),t.EFF(27),t.nI1(28,"translate"),t.k0s()()()),2&e&&(t.R7$(6),t.JRh(t.bMT(7,8,"BHUMATA-MITRA")),t.R7$(3),t.SpI("",t.bMT(10,10,"Initializing...")," "),t.R7$(4),t.Lme("",t.i5U(14,12,s.progressPercent,"1.0-0"),"% ",t.bMT(15,15,"Complete")),t.R7$(4),t.xc7("width",s.progressPercent,"%"),t.R7$(2),t.Dyx(s.steps),t.R7$(5),t.SpI(" ",t.bMT(25,17,"Your Rewards Awaits!")," "),t.R7$(3),t.SpI(" ",t.bMT(28,19,"SCAN_QR_PRODUCTS")," "))},dependencies:[g.iq,g.W9,f.h,d.MD,C.YN,f.D9,d.QX],styles:[".initialization-container[_ngcontent-%COMP%]{--background: #f8fdf8;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px 20px;text-align:center}.app-logo[_ngcontent-%COMP%]{margin-bottom:40px}.app-logo[_ngcontent-%COMP%]   .logo-circle[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:32px;margin:0 auto 15px}.app-logo[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#2c5530;margin-bottom:5px}.app-logo[_ngcontent-%COMP%]   .logo-subtitle[_ngcontent-%COMP%]{color:#68a36d;font-size:16px}.progress-container[_ngcontent-%COMP%]{width:100%;margin-bottom:40px}.progress-container[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{color:#5a8c5a;margin-bottom:10px;font-size:14px}.progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e8f5e9;border-radius:4px}.progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:#68bb65;border-radius:4px;transition:width .3s ease}.loading-steps[_ngcontent-%COMP%]{width:100%;margin-bottom:40px}.step[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px 20px;margin-bottom:10px;border-radius:10px;background:#f0f7f0}.step.active[_ngcontent-%COMP%]{background:#e8f5e9;border-left:4px solid #68bb65}.step.completed[_ngcontent-%COMP%]{background:#e8f5e9}.step[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{width:30px;height:30px;background:#68bb65;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}.step[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]{flex:1;text-align:left;color:#2c5530}.step[_ngcontent-%COMP%]   .step-loader[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]{display:flex;gap:4px}.step[_ngcontent-%COMP%]   .step-loader[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;background:#68a36d;border-radius:50%;animation:_ngcontent-%COMP%_loading-dots 1.4s ease-in-out infinite both}.step[_ngcontent-%COMP%]   .step-loader[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.step[_ngcontent-%COMP%]   .step-loader[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}.rewards-preview[_ngcontent-%COMP%]{background:#fff9c4;padding:20px;border-radius:10px;border-left:4px solid #ffd54f}.rewards-preview[_ngcontent-%COMP%]   .rewards-title[_ngcontent-%COMP%]{font-weight:700;color:#2c5530;margin-bottom:8px;display:flex;align-items:center;justify-content:center;gap:8px}.rewards-preview[_ngcontent-%COMP%]   .rewards-description[_ngcontent-%COMP%]{color:#5a8c5a;font-size:14px}@keyframes _ngcontent-%COMP%_loading-dots{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.glass-card[_ngcontent-%COMP%]{display:inline-block;padding:1rem;border-radius:18px;background:#ffffff1f;border:1px solid rgba(255,255,255,.18);box-shadow:0 8px 30px #00000040;backdrop-filter:blur(8px) saturate(120%);-webkit-backdrop-filter:blur(8px) saturate(120%);transition:transform .25s ease,box-shadow .25s ease;overflow:hidden}"]}))}return o(),r})()}}]);