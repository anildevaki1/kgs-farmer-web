"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[783],{1783(D,I,p){p.d(I,{ShowFormPage:()=>V});var M=p(467),o=p(375),u=p(7558),m=p(2040),y=p(1600),b=p(9917),g=p(634),C=p(5902),S=p(5689),e=p(5547);let T=(()=>{var r;class d{constructor(a){this.el=a,this.composing=!1}onCompositionStart(){this.composing=!0}onCompositionEnd(a){this.composing=!1;const t=this.getNativeValue(a.target);this.processInput(t)}onInput(a){if(this.composing)return;const t=this.getNativeValue(a.target);this.processInput(t)}getNativeInput(a){const n=a||this.el&&this.el.nativeElement;if(!n)return null;if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement)return n;const t=n.querySelector&&(n.querySelector("input")||n.querySelector("textarea"));return t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?t:null}getNativeValue(a){const n=this.getNativeInput(a);if(n)return n.value;const t=this.el&&this.el.nativeElement;return t&&"string"==typeof t.value?t.value:""}processInput(a){const n=this.getNativeInput(),t=this.el&&this.el.nativeElement,s=this.capitalizeWords(a);if(!n)return void(t&&"string"==typeof t.value&&t.value!==s&&(t.value=s));const l=n.selectionStart,i=n.selectionEnd;if(s===a)return;const f="number"==typeof l?a.length-l:null;if(n.value=s,"function"==typeof n.setSelectionRange)if(null!==f&&"number"==typeof i&&"number"==typeof l){const h=Math.max(0,s.length-f);n.setSelectionRange(h,h+(i-l))}else"number"==typeof l&&"number"==typeof i&&n.setSelectionRange(l,i)}capitalizeWords(a){return"string"!=typeof a?"":a.split(" ").map(n=>n&&n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" ")}static#e=r=()=>(this.\u0275fac=function(n){return new(n||d)(e.rXU(e.aKT))},this.\u0275dir=e.FsC({type:d,selectors:[["","capitalize",""]],hostBindings:function(n,t){1&n&&e.bIt("compositionstart",function(){return t.onCompositionStart()})("compositionend",function(l){return t.onCompositionEnd(l)})("input",function(l){return t.onInput(l)})}}))}return r(),d})();var _=p(8018),j=p(5670);function F(r,d){if(1&r){const c=e.RV6();e.j41(0,"ion-item",25),e.bIt("click",function(){const n=o.eBV(c).$implicit,t=e.XpG(2);return o.Njj(t.entity().state=n.State_name)}),e.EFF(1),e.k0s()}if(2&r){const c=d.$implicit;e.R7$(),e.JRh(c.State_name)}}function k(r,d){if(1&r&&(e.j41(0,"ion-list",16),e.Z7z(1,F,2,1,"ion-item",24,e.fX1),e.k0s()),2&r){const c=e.XpG();e.R7$(),e.Dyx(c.statefilteredItems())}}function v(r,d){if(1&r){const c=e.RV6();e.j41(0,"ion-item",26),e.bIt("click",function(){const n=o.eBV(c).$implicit,t=e.XpG(2);return o.Njj(t.entity().district=n.District_name)}),e.EFF(1),e.k0s()}if(2&r){const c=d.$implicit;e.R7$(),e.JRh(c.District_name)}}function R(r,d){if(1&r&&(e.j41(0,"ion-list",16),e.Z7z(1,v,2,1,"ion-item",null,e.fX1),e.k0s()),2&r){const c=e.XpG();e.R7$(),e.Dyx(c.distfilteredItems())}}function P(r,d){if(1&r){const c=e.RV6();e.j41(0,"ion-item",26),e.bIt("click",function(){const n=o.eBV(c).$implicit,t=e.XpG(2);return o.Njj(t.entity().taluka=n.Taluka_name)}),e.EFF(1),e.k0s()}if(2&r){const c=d.$implicit;e.R7$(),e.SpI(" ",c.Taluka_name)}}function w(r,d){if(1&r&&(e.j41(0,"ion-list",16),e.Z7z(1,P,2,1,"ion-item",null,e.fX1),e.k0s()),2&r){const c=e.XpG();e.R7$(),e.Dyx(c.talfilteredItems())}}function B(r,d){if(1&r){const c=e.RV6();e.j41(0,"ion-item",25),e.bIt("click",function(){const n=o.eBV(c).$implicit,t=e.XpG(2);return o.Njj(t.entity().place=n.City_name)}),e.EFF(1),e.k0s()}if(2&r){const c=d.$implicit;e.R7$(),e.JRh(c.City_name)}}function N(r,d){if(1&r&&(e.j41(0,"ion-list",16),e.Z7z(1,B,2,1,"ion-item",24,e.fX1),e.k0s()),2&r){const c=e.XpG();e.R7$(),e.Dyx(c.placefilteredItems())}}let V=(()=>{var r;class d{constructor(){this.navSrc=(0,o.WQX)(y.d),this.storageSrc=(0,o.WQX)(y.H),this.alertSrc=(0,o.WQX)(C.n),this.apiSrc=(0,o.WQX)(S.z),this.translate=(0,o.WQX)(_.c$),this.statefilteredItems=(0,o.vPA)([]),this.distfilteredItems=(0,o.vPA)([]),this.talfilteredItems=(0,o.vPA)([]),this.placefilteredItems=(0,o.vPA)([]),this.otpPanel=!1,this.entity=(0,o.vPA)({}),this.type="password",this.places=(0,o.vPA)([])}ionViewDidEnter(){var a=this;return(0,M.A)(function*(){a.places.set(yield a.storageSrc.companyInfo()),a.entity.set((yield a.storageSrc.get("farmerInfo"))||{})})()}filterStates(a,n){if("state"==a){const t=this.places().states;if(!n||""===n.trim())return void this.statefilteredItems.set(t);const s=t.filter(l=>l.State_name.toUpperCase().includes(n.toUpperCase()));this.statefilteredItems.set(s)}if("district"==a){const t=this.places().districts;if(!n||""===n.trim())return void this.distfilteredItems.set(t);const s=t.filter(l=>l.District_name.toUpperCase().includes(n.toUpperCase()));this.distfilteredItems.set(s)}if("taluka"==a){const t=this.places().talukas;if(!n||""===n.trim())return void this.talfilteredItems.set(t);const s=t.filter(l=>l.Taluka_name.toUpperCase().includes(n.toUpperCase()));this.talfilteredItems.set(s)}if("place"==a){const t=this.places().places;if(!n||""===n.trim())return void this.placefilteredItems.set(t);const s=t.filter(l=>l.City_name.toUpperCase().includes(n.toUpperCase()));this.placefilteredItems.set(s)}}onClickOutside(a){this.talfilteredItems().length=0,this.statefilteredItems().length=0,this.distfilteredItems().length=0,this.placefilteredItems().length=0}scrollUp(a){var n=this;return(0,M.A)(function*(){let t=a.target;if(t.shadowRoot){const h=t.shadowRoot.querySelector("input, textarea");h&&(t=h)}const s=yield n.content.getScrollElement(),l=t.getBoundingClientRect(),i=s.getBoundingClientRect();n.content.scrollToPoint(0,s.scrollTop+(l.top-i.top)-100,400)})()}submit(){this.entity.update(a=>({...a,username:a.f_name,category:"Farm",visit:"Field Visit",registered:!0})),this.apiSrc.post("farmer/update",this.entity(),null,{"content-type":"application/json"}).pipe((0,j.t)(1)).subscribe({next:a=>{this.storageSrc.set("farmerInfo",a),this.navSrc.navigate("dashboard",null,"forward"),this.animateButton(),this.shootConfettiWave(),this.alertSrc.messageBox(this.translate.instant("\u{1f389} +100 Points Added Scan \n QR after purchase to earn more!"))},error:a=>{this.alertSrc.alert(a.message)}})}getuppercase(a,n){const t=n?.toUpperCase()??"";this.entity.update(s=>({...s,[a]:t}))}animateButton(){const a=document.getElementById("celebrateBtn");g.os.to(a,{scale:1.2,duration:.2,ease:"back.out(2)"}),g.os.to(a,{scale:1,duration:.5,delay:.2,ease:"elastic.out(1, 0.4)"})}createConfetti(){for(let a=0;a<70;a++){const n=document.createElement("div");n.classList.add("confetti"),document.body.appendChild(n);const t=["#ff4081","#fbc02d","#4caf50","#2196f3","#ff5722","#9c27b0"];n.style.background=t[Math.floor(Math.random()*t.length)];const s=Math.random()*window.innerWidth,l=s+300*(Math.random()-.5),i=10*Math.random()+6;n.style.width=`${i}px`,n.style.height=`${i}px`,n.style.left=`${s}px`,n.style.top="-20px",n.style.position="absolute",n.style.borderRadius="50%",n.style.pointerEvents="none",n.style.opacity="0.8",n.style.zIndex="9999",g.os.to(n,{y:window.innerHeight+50,x:l,rotation:720*Math.random(),duration:2+2*Math.random(),ease:"power1.out",onComplete:()=>n.remove()})}}shootConfettiWave(){this.createConfetti(),setTimeout(()=>this.createConfetti(),500),setTimeout(()=>this.createConfetti(),1e3)}static#e=r=()=>(this.\u0275fac=function(n){return new(n||d)},this.\u0275cmp=e.VBU({type:d,selectors:[["app-show-form"]],viewQuery:function(n,t){if(1&n&&e.GBs(m.W9,5),2&n){let s;e.mGM(s=e.lsd())&&(t.content=s.first)}},hostBindings:function(n,t){1&n&&e.bIt("click",function(l){return t.onClickOutside(l)},e.EBC)},decls:54,vars:89,consts:[["content",""],["showForm","ngForm"],["Address","ngModel"],[3,"translucent"],["color","primary"],["slot","end"],["id","celebrateBtn",1,"touch-manipulation",3,"click","disabled"],[1,"fas","fa-circle-check","text-2xl"],[1,"ion-padding"],[1,"pb-64"],["prefixIcon","fas fa-user text-blue-700","name","name","type","text","capitalize","",3,"ngModelChange","label","ngModel","placeholder","required"],[1,"with-icon","custom-item","relative","my-3","mb-4"],["for","preferredBy",1,"stacked","d-block","mb-2"],["name","Address","type","text",3,"ngModelChange","ngModel","placeholder"],[1,"relative"],["prefixIcon","fas fa-location-dot text-green-700","name","state","type","text",3,"ngModelChange","focus","label","ngModel","placeholder","required"],[1,"input-autocomplete",2,"top","82px"],["prefixIcon","fas fa-location-dot text-orange-700","name","district","type","text",3,"ngModelChange","focus","label","ngModel","placeholder"],["prefixIcon","fas fa-location-dot text-pink-700","name","taluka","type","text",3,"ngModelChange","focus","label","ngModel","placeholder"],["prefixIcon","fas fa-location-dot text-blue-700","name","place","type","text",1,"",3,"ngModelChange","focus","label","ngModel","placeholder","required"],["prefixIcon","fas fa-envelope text-blue-700","name","email","type","email",3,"ngModelChange","label","ngModel","placeholder"],["prefixIcon","fas fa-mobile text-blue-700","name","mobile","type","tel",3,"ngModelChange","label","minlength","maxlength","ngModel","placeholder","required"],["prefixIcon","fas fa-mobile text-blue-700","name","aadhar","type","tel",3,"ngModelChange","label","minlength","maxlength","ngModel","pattern","placeholder","required"],["prefixIcon","fas fa-solid fa-wheat-awn text-green-600","name","cropName","type","text","capitalize","",3,"ngModelChange","label","ngModel","placeholder"],[1,"p-2"],[1,"p-2",3,"click"],[3,"click"]],template:function(n,t){if(1&n){const s=e.RV6();e.j41(0,"ion-header",3)(1,"ion-toolbar",4)(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",5)(6,"ion-button",6),e.bIt("click",function(){return o.eBV(s),o.Njj(t.submit())}),e.nrm(7,"i",7),e.k0s()()()(),e.j41(8,"ion-content",8,0)(10,"form",9,1)(12,"dss-input",10),e.nI1(13,"translate"),e.nI1(14,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().f_name,i)||(t.entity().f_name=i),o.Njj(i)}),e.k0s(),e.j41(15,"div",11)(16,"label",12),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"textarea",13,2),e.nI1(21,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().address,i)||(t.entity().address=i),o.Njj(i)}),e.k0s()(),e.j41(22,"div",14)(23,"dss-input",15),e.nI1(24,"translate"),e.nI1(25,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().state,i)||(t.entity().state=i),o.Njj(i)}),e.bIt("ngModelChange",function(i){return o.eBV(s),t.getuppercase("state",i),o.Njj(t.filterStates("state",i))})("focus",function(i){return o.eBV(s),o.Njj(t.scrollUp(i))}),e.k0s(),e.nVh(26,k,3,0,"ion-list",16),e.k0s(),e.j41(27,"div",14)(28,"dss-input",17),e.nI1(29,"translate"),e.nI1(30,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().district,i)||(t.entity().district=i),o.Njj(i)}),e.bIt("ngModelChange",function(i){return o.eBV(s),t.getuppercase("district",i),o.Njj(t.filterStates("district",i))})("focus",function(i){return o.eBV(s),o.Njj(t.scrollUp(i))}),e.k0s(),e.nVh(31,R,3,0,"ion-list",16),e.k0s(),e.j41(32,"div",14)(33,"dss-input",18),e.nI1(34,"translate"),e.nI1(35,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().taluka,i)||(t.entity().taluka=i),o.Njj(i)}),e.bIt("ngModelChange",function(i){return o.eBV(s),t.getuppercase("taluka",i),o.Njj(t.filterStates("taluka",i))})("focus",function(i){return o.eBV(s),o.Njj(t.scrollUp(i))}),e.k0s(),e.nVh(36,w,3,0,"ion-list",16),e.k0s(),e.j41(37,"div",14)(38,"dss-input",19),e.nI1(39,"translate"),e.nI1(40,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().place,i)||(t.entity().place=i),o.Njj(i)}),e.bIt("ngModelChange",function(i){return o.eBV(s),t.getuppercase("place",i),o.Njj(t.filterStates("place",i))})("focus",function(i){return o.eBV(s),o.Njj(t.scrollUp(i))}),e.k0s(),e.nVh(41,N,3,0,"ion-list",16),e.k0s(),e.j41(42,"dss-input",20),e.nI1(43,"translate"),e.nI1(44,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().email,i)||(t.entity().email=i),o.Njj(i)}),e.k0s(),e.j41(45,"dss-input",21),e.nI1(46,"translate"),e.nI1(47,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().mobile,i)||(t.entity().mobile=i),o.Njj(i)}),e.k0s(),e.j41(48,"dss-input",22),e.nI1(49,"translate"),e.nI1(50,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().aadhar,i)||(t.entity().aadhar=i),o.Njj(i)}),e.k0s(),e.j41(51,"dss-input",23),e.nI1(52,"translate"),e.nI1(53,"translate"),e.mxI("ngModelChange",function(i){return o.eBV(s),e.DH7(t.entity().crop,i)||(t.entity().crop=i),o.Njj(i)}),e.k0s()()()}if(2&n){const s=e.sdS(11);e.Y8G("translucent",!0),e.R7$(3),e.JRh(e.bMT(4,47,"Form")),e.R7$(3),e.Y8G("disabled",s.invalid),e.R7$(6),e.Y8G("label",e.bMT(13,49,"Name")),e.R50("ngModel",t.entity().f_name),e.Y8G("placeholder",e.bMT(14,51,"Enter Name"))("required",!0),e.R7$(5),e.SpI("",e.bMT(18,53,"Address")," "),e.R7$(2),e.R50("ngModel",t.entity().address),e.Y8G("placeholder",e.bMT(21,55,"Enter Address")),e.R7$(4),e.Y8G("label",e.bMT(24,57,"State")),e.R50("ngModel",t.entity().state),e.Y8G("placeholder",e.bMT(25,59,"Select State"))("required",!0),e.R7$(3),e.vxM(t.statefilteredItems().length?26:-1),e.R7$(2),e.Y8G("label",e.bMT(29,61,"District")),e.R50("ngModel",t.entity().district),e.Y8G("placeholder",e.bMT(30,63,"Select District")),e.R7$(3),e.vxM(t.distfilteredItems().length?31:-1),e.R7$(2),e.Y8G("label",e.bMT(34,65,"Taluka")),e.R50("ngModel",t.entity().taluka),e.Y8G("placeholder",e.bMT(35,67,"Select Taluka")),e.R7$(3),e.vxM(t.talfilteredItems().length?36:-1),e.R7$(2),e.Y8G("label",e.bMT(39,69,"Place")),e.R50("ngModel",t.entity().place),e.Y8G("placeholder",e.bMT(40,71,"Select Place"))("required",!0),e.R7$(3),e.vxM(t.placefilteredItems().length?41:-1),e.R7$(),e.Y8G("label",e.bMT(43,73,"Email")),e.R50("ngModel",t.entity().email),e.Y8G("placeholder",e.bMT(44,75,"Enter Email")),e.R7$(3),e.Y8G("label",e.bMT(46,77,"Mobile No"))("minlength",10)("maxlength",10),e.R50("ngModel",t.entity().mobile),e.Y8G("placeholder",e.bMT(47,79,"Enter Mobile No"))("required",!0),e.R7$(3),e.Y8G("label",e.bMT(49,81,"Aadhar No"))("minlength",12)("maxlength",12),e.R50("ngModel",t.entity().aadhar),e.Y8G("pattern","^[2-9][0-9]{11}$")("placeholder",e.bMT(50,83,"Enter Aadhar No"))("required",!0),e.R7$(3),e.Y8G("label",e.bMT(52,85,"Crop Name")),e.R50("ngModel",t.entity().crop),e.Y8G("placeholder",e.bMT(53,87,"Enter Crop"))}},dependencies:[m.uz,m.nf,_.h,m.Jm,b.S,T,m.W9,m.eU,m.BC,u.YN,u.qT,u.me,u.BC,u.cb,u.YS,u.xh,u.tU,u.R_,u.vS,u.cV,m.ai,m.QW,_.D9],encapsulation:2}))}return r(),d})()}}]);